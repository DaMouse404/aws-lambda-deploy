'use strict';
var exec_sync = require('./exec_sync');
// note: can't use node's execSync because its not in 0.10.36 (only v.0.12+)

/**
 *
 */
function install_node_modules(dist) {
  var start = process.cwd();            // get current working directory
  process.chdir(dist);                  // change to /dist directory
  var cmd = 'npm install --production'; // install only production node_modules
  exec_sync(cmd);                       // execute command synchronously
  process.chdir(start);                 // change back to original directory
  return;
}

// var dist_path = process.env.TMPDIR + 'dist/';
var utils = require('./utils');
var copy_files = require('./copy_files')

var dist_path = utils.get_base_path() + 'dist/';
console.log(dist_path)

var files_to_pack = ['package.json'];
copy_files(files_to_pack, dist_path);
install_node_modules(dist_path);
console.log('Done!');

module.exports = install_node_modules;
