'use strict';
var assert = require('assert');
var fs = require('fs');
var path = require('path');
var utils = require('../lib/utils');
var copy_files = require('../lib/copy_files');
var install_node_modules = require('../lib/install_node_modules');

describe('install_node_modules', function() {

  it('install production node_modules only', function(done) {
    var dist_path = process.env.TMPDIR + 'dist/';
    // console.log(dist_path);
    var files_to_pack = ['package.json'];
    copy_files(files_to_pack, dist_path);
    install_node_modules(dist_path);
    var aws_pkg = dist_path + '/node_modules/aws-sdk/package.json';
    // console.log('pkg',aws_pkg);
    var pkg = require(aws_pkg);
    assert.equal(pkg.name, 'aws-sdk');
    done();
  });

});
