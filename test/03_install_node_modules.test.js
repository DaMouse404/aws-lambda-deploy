'use strict';
var assert = require('assert');
var utils = require('../lib/utils');
var copyfiles = require('../lib/copyfiles');
var install_node_modules = require('../lib/install_node_modules');

describe('install_node_modules (production)', function () {
  it('install production node_modules only', function (done) {
    var distpath = process.env.TMPDIR + 'dist/';
    copyfiles();
    install_node_modules();
    var aws_pkg = distpath + 'node_modules/aws-sdk/package.json';
    var pkg = require(aws_pkg);
    assert.equal(pkg.name, 'aws-sdk');
    utils.delete_dir_contents(distpath, true);  // cleanup for next test
    done();
  });
});
